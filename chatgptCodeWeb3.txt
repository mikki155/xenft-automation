import Web3 from 'web3';
import MyContract from './MyContract.json';

let web3;

if (typeof window !== 'undefined' && typeof window.ethereum !== 'undefined') {
  // We are in the browser and MetaMask is running
  web3 = new Web3(window.ethereum);
  // Request MetaMask to enable itself
  window.ethereum.enable();
} else {
  // We are on the server *OR* the user is not running MetaMask
  const provider = new Web3.providers.HttpProvider(
    'https://mainnet.infura.io/v3/your-infura-project-id'
  );
  web3 = new Web3(provider);
}

const contractAddress = '0x123456789abcdef'; // Replace with your contract address
const contractAbi = MyContract.abi;

const contractInstance = new web3.eth.Contract(contractAbi, contractAddress);

const bulkRankClaim = async (count, term) => {
  const accounts = await web3.eth.getAccounts();
  const result = await contractInstance.methods.bulkRankClaim(count, term).send({
    from: accounts[0],
  });
  console.log(result);
}
